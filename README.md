# Structurizr.InfrastructureAsCodeStructurizr.InfrastructureAsCode is a library that uses both [Structurizr for .NET](https://github.com/structurizr/dotnet) and the [Azure SDK for .NET](https://github.com/Azure/azure-sdk-for-net/tree/Fluent) to provide an easy to use architecture- and infrastructure-as-code solution. Currently, there is only an implementation for Azure resources available.## How to desribe your architecture and infrastructureYou can find a sample implementation [here](https://github.com/ChristianEder/Structurizr.InfrastructureAsCode/tree/master/Structurizr.InfrastructureAsCode.Azure.Sample).### Create the architecture and infrastructure model- Create a subclass of SoftwareSystemWithInfrastructure which will describe your software system. For this, you will use Structurizrs Workspace, SoftwareSystem and Container classes. See the [sample projects Shop system](https://github.com/ChristianEder/Structurizr.InfrastructureAsCode/blob/master/Structurizr.InfrastructureAsCode.Azure.Sample/Model/Shop.cs)-  Create subclasses of ContainerWithInfrastructure which will describe individual containers and their corresponding cloud infrastructure. See the [sample projects frontend container](https://github.com/ChristianEder/Structurizr.InfrastructureAsCode/blob/master/Structurizr.InfrastructureAsCode.Azure.Sample/Model/ShopFrontend.cs)### Use Structurizr to render the model to architecture diagramsSince the model you created in the first step uses Structurizrs SDK to describe the architecture of your software system, you can use the Strucurizr API to render / upload that model directly to Structurizr.### Use Structurizr.InfrastructureAsCode to render the model to Azure resourcesBefore creating any Azure resoures, you will need to- Implement a console application similar to the [sample](https://github.com/ChristianEder/Structurizr.InfrastructureAsCode/tree/master/Structurizr.InfrastructureAsCode.Azure.Sample)- create an Azure AD application that will be used by that console application to authenticate against the Azure Resource Manager API  - Login to the [Azure portal](https://portal.azure.com)  - Open your Active Directory  - Open the App Registrations blade  - Create a "New application registration"     - Application type "Native"     - Create a key in the Apps "Keys" blade and note down its value. You will need this key to authenticate.     - Open the "Required permissions" of the App and add the folowing permissions (I am not sure if you need all of them):          - Microsoft.Azure.ActiveDirectory: Read directory data, Access the directory as the signed-in user         - Microsoft Graph: Read and write Microsoft Intune RBAC settings (preview), Read and write Microsoft Intune apps (preview), Read and write all groups, Read and write directory data, Access directory as the signed in user         - Windows Azure Service Management API: Access Azure Service Management as organization users (preview)- Use the InfrastructureRendererBuilder class in the console app to create an Azure InfrastructureRenderer. See [the sample Program.cs](https://github.com/ChristianEder/Structurizr.InfrastructureAsCode/blob/master/Structurizr.InfrastructureAsCode.Azure.Sample/Program.cs). Here you will need to pass in the credentials to access your Azure subscription. These should **not** be your personal credentials, but the credentials (key) you just created for the Azure AD Application.- Use pass your model (the SoftwareSystemWithInfrastructure subclass) to that renderer. This will create the resources defined as the infrastructure elements in your model in your Azure subscription.## How to extend Structurizr.InfrastructureAsCode to support additional resource typesTBD